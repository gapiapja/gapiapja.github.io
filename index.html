<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrack - Pencatat Keuangan dengan AI</title>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --danger: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--secondary);
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #d1145a;
        }
        
        .transaction-list {
            margin-top: 20px;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .transaction-item:last-child {
            border-bottom: none;
        }
        
        .transaction-info {
            flex: 1;
        }
        
        .transaction-amount {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .income {
            color: #28a745;
        }
        
        .expense {
            color: var(--danger);
        }
        
        .transaction-category {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            background-color: #e9ecef;
            margin-top: 5px;
        }
        
        .summary {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            margin: 0 10px;
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .summary-item h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .balance-positive {
            color: #28a745;
        }
        
        .balance-negative {
            color: var(--danger);
        }
        
        .ai-insight {
            background: linear-gradient(135deg, #4cc9f0, #4361ee);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .ai-insight h3 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .ai-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .category-chart {
            margin-top: 20px;
        }
        
        .category-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        
        .category-bar {
            height: 10px;
            background: var(--primary);
            border-radius: 5px;
            margin-top: 5px;
        }
        
        @media (max-width: 600px) {
            .summary {
                flex-direction: column;
            }
            
            .summary-item {
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>FinTrack</h1>
            <p class="subtitle">Pencatat Keuangan dengan AI Kategorisasi</p>
        </header>
        
        <div class="summary">
            <div class="summary-item">
                <p>Saldo</p>
                <h3 id="balance" class="balance-positive">Rp 0</h3>
            </div>
            <div class="summary-item">
                <p>Pemasukan</p>
                <h3 id="income-total">Rp 0</h3>
            </div>
            <div class="summary-item">
                <p>Pengeluaran</p>
                <h3 id="expense-total">Rp 0</h3>
            </div>
        </div>
        
        <div class="card">
            <h2>Tambah Transaksi</h2>
            <form id="transaction-form">
                <div class="form-group">
                    <label for="description">Deskripsi</label>
                    <input type="text" id="description" placeholder="Contoh: Beli makan siang" required>
                </div>
                <div class="form-group">
                    <label for="amount">Jumlah (Rp)</label>
                    <input type="number" id="amount" placeholder="Contoh: 50000" required>
                </div>
                <div class="form-group">
                    <label for="type">Jenis Transaksi</label>
                    <select id="type" required>
                        <option value="income">Pemasukan</option>
                        <option value="expense">Pengeluaran</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="date">Tanggal</label>
                    <input type="date" id="date" required>
                </div>
                <button type="submit">Tambah Transaksi</button>
            </form>
        </div>
        
        <div class="card">
            <h2>Riwayat Transaksi</h2>
            <div class="transaction-list" id="transaction-list">
                <!-- Transaksi akan ditampilkan di sini -->
            </div>
        </div>
        
        <div class="card">
            <h2>Analisis AI</h2>
            <div class="ai-insight">
                <h3><span class="ai-icon">ðŸ¤–</span> Insight dari AI</h3>
                <p id="ai-insight-text">AI akan menganalisis pola pengeluaran Anda dan memberikan saran berdasarkan kategori.</p>
            </div>
            
            <div class="category-chart">
                <h3>Pengeluaran per Kategori</h3>
                <div id="category-chart">
                    <!-- Chart kategori akan ditampilkan di sini -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data transaksi
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
        
        // Inisialisasi aplikasi
        document.addEventListener('DOMContentLoaded', function() {
            // Set tanggal hari ini sebagai default
            document.getElementById('date').valueAsDate = new Date();
            
            // Tampilkan transaksi
            displayTransactions();
            
            // Update ringkasan
            updateSummary();
            
            // Analisis AI
            generateAiInsight();
            
            // Event listener untuk form
            document.getElementById('transaction-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addTransaction();
            });
        });
        
        // Fungsi untuk menambah transaksi
        function addTransaction() {
            const description = document.getElementById('description').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const type = document.getElementById('type').value;
            const date = document.getElementById('date').value;
            
            // Deteksi kategori menggunakan AI sederhana
            const category = detectCategory(description, amount, type);
            
            // Buat objek transaksi
            const transaction = {
                id: Date.now(),
                description,
                amount,
                type,
                date,
                category
            };
            
            // Tambahkan ke array transaksi
            transactions.push(transaction);
            
            // Simpan ke localStorage
            saveTransactions();
            
            // Reset form
            document.getElementById('transaction-form').reset();
            document.getElementById('date').valueAsDate = new Date();
            
            // Perbarui tampilan
            displayTransactions();
            updateSummary();
            generateAiInsight();
        }
        
        // Fungsi untuk mendeteksi kategori menggunakan AI sederhana
        function detectCategory(description, amount, type) {
            if (type === 'income') return 'Pendapatan';
            
            const desc = description.toLowerCase();
            
            // Deteksi berdasarkan kata kunci dalam deskripsi
            if (desc.includes('makan') || desc.includes('restoran') || desc.includes('warung') || desc.includes('kafe')) {
                return 'Makanan & Minuman';
            } else if (desc.includes('bensin') || desc.includes('transport') || desc.includes('gojek') || desc.includes('grab') || desc.includes('angkot')) {
                return 'Transportasi';
            } else if (desc.includes('belanja') || desc.includes('market') || desc.includes('supermarket') || desc.includes('mall')) {
                return 'Belanja';
            } else if (desc.includes('listrik') || desc.includes('air') || desc.includes('internet') || desc.includes('pulsa')) {
                return 'Utilitas';
            } else if (desc.includes('hiburan') || desc.includes('nonton') || desc.includes('film') || desc.includes('game')) {
                return 'Hiburan';
            } else if (desc.includes('kesehatan') || desc.includes('dokter') || desc.includes('obat') || desc.includes('rumah sakit')) {
                return 'Kesehatan';
            } else if (desc.includes('pendidikan') || desc.includes('buku') || desc.includes('kursus')) {
                return 'Pendidikan';
            } else {
                return 'Lainnya';
            }
        }
        
        // Fungsi untuk menampilkan transaksi
        function displayTransactions() {
            const transactionList = document.getElementById('transaction-list');
            transactionList.innerHTML = '';
            
            if (transactions.length === 0) {
                transactionList.innerHTML = '<p style="text-align: center; padding: 20px;">Belum ada transaksi</p>';
                return;
            }
            
            // Urutkan transaksi berdasarkan tanggal (terbaru pertama)
            const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedTransactions.forEach(transaction => {
                const transactionItem = document.createElement('div');
                transactionItem.className = 'transaction-item';
                
                const formattedDate = new Date(transaction.date).toLocaleDateString('id-ID');
                const formattedAmount = formatCurrency(transaction.amount);
                
                transactionItem.innerHTML = `
                    <div class="transaction-info">
                        <div class="transaction-description">${transaction.description}</div>
                        <div class="transaction-category">${transaction.category}</div>
                        <div class="transaction-date">${formattedDate}</div>
                    </div>
                    <div class="transaction-amount ${transaction.type}">
                        ${transaction.type === 'income' ? '+' : '-'} ${formattedAmount}
                    </div>
                    <button class="btn-danger" onclick="deleteTransaction(${transaction.id})">Hapus</button>
                `;
                
                transactionList.appendChild(transactionItem);
            });
        }
        
        // Fungsi untuk menghapus transaksi
        function deleteTransaction(id) {
            if (confirm('Apakah Anda yakin ingin menghapus transaksi ini?')) {
                transactions = transactions.filter(transaction => transaction.id !== id);
                saveTransactions();
                displayTransactions();
                updateSummary();
                generateAiInsight();
            }
        }
        
        // Fungsi untuk memperbarui ringkasan
        function updateSummary() {
            const incomeTotal = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const expenseTotal = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const balance = incomeTotal - expenseTotal;
            
            document.getElementById('income-total').textContent = formatCurrency(incomeTotal);
            document.getElementById('expense-total').textContent = formatCurrency(expenseTotal);
            document.getElementById('balance').textContent = formatCurrency(balance);
            
            // Ubah warna saldo berdasarkan nilai
            const balanceElement = document.getElementById('balance');
            balanceElement.className = balance >= 0 ? 'balance-positive' : 'balance-negative';
        }
        
        // Fungsi untuk menghasilkan insight AI
        function generateAiInsight() {
            const insightElement = document.getElementById('ai-insight-text');
            const categoryChart = document.getElementById('category-chart');
            
            if (transactions.length === 0) {
                insightElement.textContent = 'AI akan menganalisis pola pengeluaran Anda dan memberikan saran berdasarkan kategori.';
                categoryChart.innerHTML = '<p>Belum ada data untuk dianalisis.</p>';
                return;
            }
            
            // Hitung pengeluaran per kategori
            const expensesByCategory = {};
            transactions
                .filter(t => t.type === 'expense')
                .forEach(t => {
                    expensesByCategory[t.category] = (expensesByCategory[t.category] || 0) + t.amount;
                });
            
            // Tampilkan chart kategori
            categoryChart.innerHTML = '';
            const totalExpenses = Object.values(expensesByCategory).reduce((sum, amount) => sum + amount, 0);
            
            Object.entries(expensesByCategory).forEach(([category, amount]) => {
                const percentage = totalExpenses > 0 ? (amount / totalExpenses * 100).toFixed(1) : 0;
                
                const categoryItem = document.createElement('div');
                categoryItem.className = 'category-item';
                categoryItem.innerHTML = `
                    <div>
                        <div>${category}</div>
                        <div class="category-bar" style="width: ${percentage}%"></div>
                    </div>
                    <div>${formatCurrency(amount)} (${percentage}%)</div>
                `;
                
                categoryChart.appendChild(categoryItem);
            });
            
            // Generate insight berdasarkan data
            let insight = '';
            
            if (totalExpenses === 0) {
                insight = 'Anda belum memiliki pengeluaran. Pertahankan kebiasaan baik ini!';
            } else {
                const largestCategory = Object.entries(expensesByCategory).reduce((a, b) => a[1] > b[1] ? a : b)[0];
                const largestAmount = expensesByCategory[largestCategory];
                
                insight = `Pengeluaran terbesar Anda adalah untuk ${largestCategory} sebesar ${formatCurrency(largestAmount)}. `;
                
                // Berikan saran berdasarkan kategori terbesar
                if (largestCategory === 'Makanan & Minuman') {
                    insight += 'Pertimbangkan untuk memasak sendiri di rumah untuk menghemat pengeluaran makanan.';
                } else if (largestCategory === 'Transportasi') {
                    insight += 'Coba gunakan transportasi umum atau carpooling untuk mengurangi biaya transportasi.';
                } else if (largestCategory === 'Belanja') {
                    insight += 'Buat daftar belanja dan patuhi untuk menghindari pembelian impulsif.';
                } else if (largestCategory === 'Hiburan') {
                    insight += 'Cari alternatif hiburan gratis atau murah seperti taman atau perpustakaan.';
                } else {
                    insight += 'Pertimbangkan untuk mengevaluasi pengeluaran ini dan mencari cara untuk mengoptimalkannya.';
                }
                
                // Analisis tren bulanan (sederhana)
                const currentMonth = new Date().getMonth();
                const currentYear = new Date().getFullYear();
                
                const thisMonthExpenses = transactions
                    .filter(t => {
                        const transactionDate = new Date(t.date);
                        return t.type === 'expense' && 
                               transactionDate.getMonth() === currentMonth && 
                               transactionDate.getFullYear() === currentYear;
                    })
                    .reduce((sum, t) => sum + t.amount, 0);
                
                const lastMonthExpenses = transactions
                    .filter(t => {
                        const transactionDate = new Date(t.date);
                        const lastMonth = currentMonth === 0 ? 11 : currentMonth - 1;
                        const lastMonthYear = currentMonth === 0 ? currentYear - 1 : currentYear;
                        
                        return t.type === 'expense' && 
                               transactionDate.getMonth() === lastMonth && 
                               transactionDate.getFullYear() === lastMonthYear;
                    })
                    .reduce((sum, t) => sum + t.amount, 0);
                
                if (lastMonthExpenses > 0) {
                    const change = ((thisMonthExpenses - lastMonthExpenses) / lastMonthExpenses * 100).toFixed(1);
                    
                    if (change > 10) {
                        insight += ` Pengeluaran bulan ini meningkat ${change}% dibanding bulan lalu. Perhatikan pengeluaran Anda.`;
                    } else if (change < -10) {
                        insight += ` Pengeluaran bulan ini turun ${Math.abs(change)}% dibanding bulan lalu. Bagus!`;
                    }
                }
            }
            
            insightElement.textContent = insight;
        }
        
        // Fungsi untuk menyimpan transaksi ke localStorage
        function saveTransactions() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }
        
        // Fungsi untuk memformat mata uang
        function formatCurrency(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }
    </script>
</body>
</html>
